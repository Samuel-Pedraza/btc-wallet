<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>BTC Wallet</title>
    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
  </head>
  <body>
    <button id="generate_pk">Generate PK</button>

    <p>Private Key: <span id="pk"></span></p>
    <p>Public Key: <span id="public_k"></span></p>

	<h2>Wallet</h2>

	<form id="create-wallet">
		<input type="text" id="wallet_name">
		<input type="submit">
	</form>

  </body>
</html>
<script type="text/javascript">
	const { ipcRenderer } = require('electron');
	const bitcoin = require('bitcoinjs-lib');

	var form = document.getElementById("create-wallet");

	form.addEventListener("submit", e => {
		e.preventDefault();

		var wallet = document.getElementById("wallet_name").value;

		ipcRenderer.send("wallet:create", {
			wallet
		})
	});

	ipcRenderer.on('wallet:done', () => {
		M.toast({
			html: `Wallet Created!`
		})
	})


	// document.getElementById("generate_pk").addEventListener("click", function(){

	// 	const keyPair = bitcoin.ECPair.makeRandom();
 //      	const { address } = bitcoin.payments.p2pkh({ pubkey: keyPair.publicKey });

	// 	document.getElementById("pk").innerHTML = keyPair.toWIF();
	// 	document.getElementById("public_k").innerHTML = address;

	// 	ipcRenderer.send('address:save', {
	// 		keyPair,
	// 		address
	// 	})
	// });



</script>